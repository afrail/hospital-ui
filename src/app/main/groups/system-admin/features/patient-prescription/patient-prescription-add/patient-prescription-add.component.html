<div *ngIf="frmGroup" style="width: 100%">
    <!-- Main -->
    <div class="flex-auto m-2 body-color">
        <!-- body Card -->
        <mat-card class="tab-color -mt-2">

            <!-- heading1 -->
            <div class="heading">
                {{'title1' | translate}}
            </div>
            <!-- // EMPLOYEE heading -->

            <!--heading button section-->
            <div fxLayout="row wrap" fxLayoutAlign="space-between center">

                <!--left side-->
                <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                    <!--add button-->
                    <div class="flex items-center justify-self-start m-1" fxLayout="row">
                        <!--<button [routerLink]="this.prefixUrl + 'patient-prescription'" color="primary" mat-raised-button>
                            <mat-icon class="mr-1" style="color: white;">arrow_back</mat-icon>
                            {{'viewList' | translate}}
                        </button> &nbsp;-->
                    </div>
                    <!-- // add button-->
                </div>
                <!-- // left side-->

                <!--right side-->
                <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                    <div class="flex justify-end m-1" fxLayout="row">
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-form-field-1 class="flex-auto gt-xs:pr-3">
                                    <mat-label>{{'previousPrescription' | translate}}</mat-label>
                                    <input (blur)="onBlurPreviousPrescription()" [(ngModel)]="filterNamePrescription" [ngModelOptions]="{standalone: true}"
                                           class="inputField"
                                           matInput name="filterNamePrescription">
                                    <mat-progress-spinner
                                        *ngIf="prescriptionScanLoader"
                                        [diameter]="24"
                                        [mode]="'indeterminate'">
                                    </mat-progress-spinner>
                                </mat-form-field-1>
                            </div>
                        </div>
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <div class="flex-auto gt-xs:pr-3">
                                    <mat-label>{{'template' | translate}}</mat-label>
                                    <mat-select-search-small
                                        (selectionChange)="onTemplateChange()"
                                        [controlName]="'template'"
                                        [data]="templateDropdownList"
                                        [formGroup]="frmGroup">
                                    </mat-select-search-small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- // right side-->

            </div>
            <!-- // heading button section-->


            <!-- form div -->
            <form [formGroup]="frmGroup">
                <!--top part-->
                <div fxLayout="row wrap">

                    <!--top left-->
                    <div class="flex flex-col bg-card shadow rounded overflow-hidden p-2" fxFlex="60%" fxFlex.md="100%" fxFlex.sm="100%"
                         fxFlex.xs="100%">
                        <!-- heading -->
                        <div class="heading">
                            <h1>{{'patientInfo'| translate}}</h1>
                        </div>
                        <!-- heading -->
                        <div fxLayout="row wrap">
                            <!--left-->
                            <div fxFlex="60%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">

                                <div fxLayout="row">

                                    <!--image-->
                                    <!--<div fxFlex="20%">
                                        <mat-icon [svgIcon]="'heroicons_solid:user-circle'"
                                                  class="icon-size-20"></mat-icon>
                                    </div>-->
                                    <!-- // image-->

                                    <!--table-->
                                    <div fxFlex="80%">
                                        <table class="smallFont">
                                            <tr>
                                                <td><strong>{{'contactNo' | translate}}</strong></td>
                                                <td>:</td>
                                                <td *ngIf="!this.tokenRegister">
                                                    <mat-form-field-1 style="display: flow-root;">
                                                    <input class="inputField" formControlName="contactNo" matInput (blur)="getPatientContactNumber()"/>
                                                </mat-form-field-1>
                                                </td>
                                                <td *ngIf="this.tokenRegister">{{tokenRegister.patientInfo.contactNo}}</td>
                                            </tr>

                                            <tr>
                                                <td><strong>{{'patientName' | translate}}</strong></td>
                                                <td>:</td>
                                                <td *ngIf="!this.tokenRegister"><mat-form-field-1 style="display: flow-root;">
                                                    <input class="inputField" formControlName="patientName" matInput/>
                                                </mat-form-field-1></td>
                                                <td *ngIf="this.tokenRegister">{{tokenRegister.patientInfo.patientName}}</td>
                                                <td>
                                                    <button *ngIf="!this.tokenRegister && frmGroup.value.patientName
                                                                        && frmGroup.value.age && frmGroup.value.contactNo"
                                                            [matTooltip]="'add' | translate"
                                                            class="toggle-sidebar-folded"
                                                            fxHide.lt-lg
                                                            mat-icon-button
                                                     (click)="tokenGenerate()">
                                                        <mat-icon color="primary"
                                                                  svgIcon="save"></mat-icon>
                                                    </button>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td><strong>{{'pulse' | translate}}</strong></td>
                                                <td>:</td>
                                               <td>
                                                   <mat-form-field-1>
                                                       <input class="inputField" formControlName="pulse" matInput/>
                                                   </mat-form-field-1>
                                               </td>
                                            </tr>

                                            <tr>
                                                <td><strong>{{'bp' | translate}}</strong></td>
                                                <td>:</td>
                                                <td>
                                                    <mat-form-field-1>
                                                        <input class="inputField" formControlName="bp" matInput/>
                                                    </mat-form-field-1>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td><strong>{{'temp' | translate}}</strong></td>
                                                <td>:</td>
                                                <mat-form-field-1>
                                                    <input class="inputField" formControlName="temp" matInput/>
                                                </mat-form-field-1>
                                            </tr>

                                        </table>
                                    </div>
                                    <!-- // table-->
                                </div>

                            </div>
                            <!--// left-->
                            <!--right-->
                            <div fxFlex="40%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                                <table class="smallFont">

                                    <tr>
                                        <td><strong>{{'age' | translate}}</strong></td>
                                        <td>:</td>
                                        <td *ngIf="!this.tokenRegister"><mat-form-field-1>
                                            <input class="inputField" formControlName="age" matInput/>
                                        </mat-form-field-1></td>
                                        <td *ngIf="this.tokenRegister" >{{tokenRegister.patientInfo.age}}</td>
                                    </tr>

                                    <tr>
                                        <td><strong>{{'rr' | translate}}</strong></td>
                                        <td>:</td>
                                        <td>
                                            <mat-form-field-1>
                                                <input class="inputField" formControlName="rr" matInput/>
                                            </mat-form-field-1>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td><strong>{{'weight' | translate}}</strong></td>
                                        <td>:</td>
                                        <td><mat-form-field-1>
                                            <input class="inputField" formControlName="weight" matInput/>
                                        </mat-form-field-1></td>
                                    </tr>

                                    <tr>
                                        <td><strong>{{'spo2' | translate}}</strong></td>
                                        <td>:</td>
                                        <td><mat-form-field-1>
                                            <input class="inputField" formControlName="spo2" matInput/>
                                        </mat-form-field-1></td>
                                    </tr>

                                    <tr>
                                        <td><strong>{{'ofc' | translate}}</strong></td>
                                        <td>:</td>
                                        <td><mat-form-field-1>
                                            <input class="inputField" formControlName="ofc" matInput/>
                                        </mat-form-field-1></td>
                                    </tr>

                                    <tr>
                                        <td colspan="2">
                                            <button (click)="openPatientPrescriptionDialog()" *ngIf="patientInfo"
                                                    [matTooltip]="'previousPrescription' | translate"
                                                    class="toggle-sidebar-folded"
                                                    fxHide.lt-lg
                                                    mat-icon-button>
                                                <mat-icon color="primary"
                                                          svgIcon="heroicons_outline:clipboard-list"></mat-icon>
                                            </button>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                            <!--// right-->
                        </div>


                    </div>
                    <!-- // top left-->

                    <!--top right-->
                    <div class="flex flex-col bg-card shadow rounded overflow-x-auto sm:overflow-y-auto p-1" fxFlex="40%" fxFlex.md="100%" fxFlex.sm="100%"
                         fxFlex.xs="100%"
                         style="height: 170px;">

                        <!--                        <div class="flex flex-col bg-card shadow rounded overflow-x-auto sm:overflow-y-auto">-->

                        <!-- heading -->
                        <div class="heading">
                            <h1>{{'tokenInfo'| translate}}</h1>
                        </div>
                        <!-- heading -->

                        <table *ngIf="!editValue" [dataSource]="dataSource" class="mat-elevation-z8 bg-transparent smallFont"
                               mat-table>
                            <!-- tokenNumber -->
                            <ng-container matColumnDef="tokenNumber">
                                <th *matHeaderCellDef style="width: 10%;">
                                    {{'tokenNumber' | translate}}
                                </th>
                                <td *matCellDef="let row" [bgColor]="tokenRegister && tokenRegister.id && row.id === tokenRegister.id ? 'gray' : 'white'" class="mediumFont"
                                    mat-cell>
                                    <span>{{ row.tokenNumber }}</span>
                                </td>
                            </ng-container>

                            <!-- patient -->
                            <ng-container matColumnDef="patient">
                                <th *matHeaderCellDef>
                                    {{'patient' | translate}}
                                </th>
                                <td *matCellDef="let row" [bgColor]="'#FDC698'" class="mediumFont" mat-cell>
                                    {{row.patientInfo.patientName}}
                                </td>
                            </ng-container>

                            <!--absenceIs-->
                            <!--<ng-container matColumnDef="absenceIs">
                                <th *matHeaderCellDef style="width: 5%;">
                                    {{'absenceIs' | translate}}
                                </th>
                                <td *matCellDef="let row" class="text-alignment"
                                    mat-cell>
                                    <div>
                                        <mat-checkbox (change)="onChangeTokenPresent(row)" [checked]="row.isPresent">
                                        </mat-checkbox>
                                    </div>
                                </td>
                            </ng-container>-->

                            <!-- dialog -->
                            <ng-container matColumnDef="dialog">
                                <th *matHeaderCellDef style="width: 5%;">

                                </th>
                                <td *matCellDef="let row" class="mediumFont" mat-cell>
                                    <div class="buttons">
                                        <button [matTooltip]="'details' | translate"
                                                class="toggle-sidebar-folded"
                                                fxHide.lt-lg
                                                mat-icon-button>
                                            <mat-icon color="primary"
                                                      svgIcon="heroicons_outline:clipboard-list"></mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </ng-container>

                            <!-- Table Action Buttons End-->
                            <tr *matHeaderRowDef="displayedColumns"
                                class="table-row smallFont" mat-header-row></tr>
                            <tr (click)="selectTokenRegister(row)" *matRowDef="let row; columns: displayedColumns"
                                class="table-row smallFont" mat-row></tr>

                        </table>

                    </div>
                    <!-- // top right-->

                </div>
                <!-- // top part-->

                <!------------------------------------------------------------------------------------------------------------------------------>
                <!--middle part-->
                <div fxLayout="row wrap">

                    <!--middle left-->

                    <!-- // middle left-->

                    <!--middle right-->
                    <div class="flex flex-col bg-card shadow rounded overflow-hidden p-2" fxFlex="100%" fxFlex.md="100%" fxFlex.sm="100%"
                         fxFlex.xs="100%">

                        <!--middle right 1-->
                        <div class="row sm:overflow-y-auto mt-2">

                            <!-- middle right left 1-->
                            <div fxFlex="35%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                                <form [formGroup]="ccFrmGroupDetails">
                                    <table [dataSource]="ccDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                           mat-table>
                                        <!-- Row definitions -->
                                        <tr *matHeaderRowDef="ccDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row (click)="ccAddRow()"></tr>
                                        <tr *matRowDef="let row; let i = index; columns: ccDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--problemType-->
                                        <ng-container matColumnDef="chiefComplaint">
                                            <th *matHeaderCellDef>
                                                {{'chiefComplaint' | translate}}
                                                <!--<mat-icon class="hand-cursor white-icon" matTooltip="{{'addNew' | translate}}"
                                                          (click)="openAllAddDialog(ehmUtils.ccDialog)"> add
                                                </mat-icon>-->
                                            </th>
                                            <td  *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flex; align-items: center">
                                                    <mat-form-field-1 class="flex-auto gt-xs:pr-3"
                                                                      style="width: 55%; margin-top: 5px;">
                                                        <input [matAutocomplete]="auto" class="border"
                                                               formControlName="chiefComplaintValue" matInput type="text">
                                                        <mat-autocomplete #auto="matAutocomplete">
                                                            <mat-option *ngFor="let item of ccDropdownList | customNameFilter: row.value.chiefComplaintValue"
                                                                        [value]="item.name"
                                                                        name="storage_condition">{{ item.name }}</mat-option>
                                                        </mat-autocomplete>
                                                    </mat-form-field-1>
                                                    <button  aria-hidden="true" class="close" ngxMatSelectSearchClear mat-icon-button *ngIf="(ccDropdownList | customNameFilter: row.value.chiefComplaintValue).length < 1"
                                                           (click)="addItem(this.ccId, row.value.chiefComplaintValue)">
                                                        <mat-icon>add</mat-icon>
                                                    </button>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--duration-->
                                        <ng-container matColumnDef="duration">
                                            <th *matHeaderCellDef>{{'duration' | translate}}</th>
                                            <td  *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell style="width: 15%">
                                                <div style="display: flow-root;">
                                                    <mat-form-field-1 style="width: 100% ;">
                                                        <input class="input" formControlName="duration" matInput min="0"
                                                               oninput="validity.valid||(value='.');" type="number">
                                                    </mat-form-field-1>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <!--

                                       &lt;!&ndash;dwmy&ndash;&gt;-->
                                       <ng-container matColumnDef="dwmy">
                                           <th *matHeaderCellDef>
                                               {{'dwmy' | translate}}
                                           </th>
                                           <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                               mat-cell style="width: 15%">
                                               <div style="display: flow-root;">
                                                   <mat-select-search-small
                                                       [controlName]="'dwmy'"
                                                       [data]="dwmyDropdownList"
                                                       [formGroup]="row">
                                                   </mat-select-search-small>
                                               </div>
                                           </td>
                                       </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 10% !important;">{{'action' | translate}}</th>
                                            <td  *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="ccAddRow()" *ngIf="ccRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="ccDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>
                                <form [formGroup]="onExaminationFrmGroupDetails">
                                    <table [dataSource]="onExaminationDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope"
                                           mat-table>
                                        <!-- Row definitions -->
                                        <tr *matHeaderRowDef="onExaminationDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row (click)="onExaminationAddRow()"></tr>
                                        <tr *matRowDef="let row; let i = index; columns: onExaminationDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--on examination-->
                                        <ng-container matColumnDef="onExamination">
                                            <th *matHeaderCellDef="let row; let index = index">
                                                {{'onExamination2' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>

                                                <mat-form-field-1 class="flex-auto gt-xs:pr-3"
                                                                  style="width: 90%; margin-top: 5px;">
                                                    <input [matAutocomplete]="auto" class="border"
                                                           formControlName="onExamination" matInput type="text">
                                                    <mat-autocomplete #auto="matAutocomplete">
                                                        <mat-option *ngFor="let item of onExaminationDropdownList | customNameFilter: row.value.onExamination"
                                                                    [value]="item.name"
                                                                    name="storage_condition">{{ item.name }}</mat-option>
                                                    </mat-autocomplete>
                                                    <button  aria-hidden="true" class="close" ngxMatSelectSearchClear mat-icon-button *ngIf="(onExaminationDropdownList | customNameFilter: row.value.onExamination).length < 1"
                                                             (click)="addItem(this.onExamId, row.value.onExamination)">
                                                        <mat-icon>add</mat-icon>
                                                    </button>
                                                </mat-form-field-1>

                                            </td>
                                        </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="onExaminationAddRow()"
                                                              *ngIf="onExaminationRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="onExamDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>
                                <form [formGroup]="investigationFindFrmGroupDetails">
                                    <table [dataSource]="investigationFindDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope"
                                           mat-table>
                                        <!-- Row definitions -->
                                        <tr *matHeaderRowDef="investigationFindDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row (click)="investigationFindAddRow()"></tr>
                                        <tr *matRowDef="let row; let i = index; columns: investigationFindDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--investigation-->
                                        <ng-container matColumnDef="investigation">
                                            <th *matHeaderCellDef="let row; let index = index">
                                                {{'oldInvestigation' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div>
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        [commonLookupId]="investigationId"
                                                        [controlName]="'investigation'"
                                                        [data]="investigationDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.investigationDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--finding-->
                                        <ng-container matColumnDef="finding">
                                            <th *matHeaderCellDef
                                                style="width: 30% !important;">{{'finding' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="finding" matInput type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>

                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="investigationFindAddRow()"
                                                              *ngIf="investigationFindRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="investigationFindDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>
                                <form [formGroup]="investigationFrmGroupDetails">
                                    <table [dataSource]="investigationDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope" mat-table>
                                        <!-- Row definitions -->
                                        <tr *matHeaderRowDef="investigationDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row (click)="investigationAddRow()"></tr>
                                        <tr *matRowDef="let row; let i = index; columns: investigationDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--investigation-->
                                        <ng-container matColumnDef="investigation">
                                            <th *matHeaderCellDef>
                                                {{'investigation' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkInvestigation(row)"
                                                        [commonLookupId]="investigationId"
                                                        [controlName]="'investigation'"
                                                        [data]="investigationDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.investigationDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="investigationAddRow()"
                                                              *ngIf="investigationRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="investigationDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>
                                    </table>
                                </form>
                                <form [formGroup]="pastIllFrmGroupDetails">
                                    <table [dataSource]="pastIllDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                           mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="pastIllDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row (click)="pastIllAddRow()"></tr>
                                        <tr *matRowDef="let row; let i = index; columns: pastIllDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--pastIll-->
                                        <ng-container matColumnDef="illnessName">
                                            <th *matHeaderCellDef style="width: 60% !important;">
                                                {{'illnessName' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkPastIll(row)"
                                                        [commonLookupId]="diseaseId"
                                                        [controlName]="'illnessName'"
                                                        [data]="diseaseDropdownList"
                                                        [formGroup]="row"
                                                        [isDental]="isDental"
                                                        [searchType]="ehmUtils.illnessDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--finding-->
                                        <ng-container matColumnDef="disposal">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'disposal' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="disposal" matInput
                                                           type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="pastIllAddRow()" *ngIf="pastIllRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="pastIllDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>
                                <form [formGroup]="diseaseFrmGroupDetails">
                                    <table [dataSource]="diseaseDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                           mat-table>
                                        <!-- Row definitions -->
                                        <tr (click)="diseaseAddRow()" *matHeaderRowDef="diseaseDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: diseaseDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--disease-->
                                        <ng-container matColumnDef="disease">
                                            <th *matHeaderCellDef>
                                                {{'disease' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkDisease(row)"
                                                        [commonLookupId]="diseaseId"
                                                        [controlName]="'disease'"
                                                        [data]="diseaseDropdownList"
                                                        [formGroup]="row"
                                                        [isDental]="isDental"
                                                        [searchType]="ehmUtils.diseaseDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--onExamination -->
                                        <ng-container matColumnDef="onExamination">
                                            <th *matHeaderCellDef
                                                style="width: 10% !important;">{{'onExamination' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="onExamination" matInput
                                                           type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>

                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="diseaseAddRow()" *ngIf="diseaseRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="diseaseDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>
                                    </table>
                                </form>
                                <form [formGroup]="adviceFrmGroupDetails">
                                    <table [dataSource]="adviceDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope" mat-table>
                                        <!-- Row definitions -->
                                        <tr (click)="adviceAddRow()" *matHeaderRowDef="adviceDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: adviceDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--advice-->
                                        <ng-container matColumnDef="advice">
                                            <th *matHeaderCellDef>
                                                {{'advice' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkAdvice(row)"
                                                        [commonLookupId]="adviceId"
                                                        [controlName]="'advice'"
                                                        [data]="adviceDropdownList"
                                                        [formGroup]="row"
                                                        [isDental]="isDental"
                                                        [searchType]="ehmUtils.adviceDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef>{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons">
                                                    <button class="toggle-sidebar-folded" fxHide.lt-lg mat-icon-button>
                                                        <mat-icon (click)="adviceAddRow()"
                                                                  *ngIf="adviceRows.length === index+1"
                                                                  color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                        </mat-icon>
                                                    </button>

                                                    <button class="toggle-sidebar-folded" fxHide.lt-lg mat-icon-button>
                                                        <mat-icon (click)="adviceDeleteRow(index)"
                                                                  color="warn" matTooltip=" {{'delete' | translate}}">
                                                            delete
                                                        </mat-icon>
                                                    </button>

                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>
                            </div>

                            <div fxFlex="65%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">

                                <form [formGroup]="medicineFrmGroupDetails">
                                    <table [dataSource]="medicineDataSourceDetails" class="mat-elevation-z8 y" formArrayName="scope"
                                           mat-table>
                                        <!-- Row definitions -->
                                        <tr *matHeaderRowDef="medicineDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: medicineDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        <!--qty-->
                                        <ng-container matColumnDef="serialNo">
                                            <th *matHeaderCellDef>{{'sl' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 5%">
                                                <div style="display: flow-root">
                                                    <mat-form-field-1 style="width: 100% ;">
                                                        <input class="input" formControlName="serialNo" matInput min="0"
                                                               oninput="validity.valid||(value='.');" type="number">
                                                    </mat-form-field-1>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--medicineMaster-->
                                        <ng-container matColumnDef="medicineMaster">
                                            <th *matHeaderCellDef>
                                                {{'medicineMaster' | translate}}
                                                <!--<mat-icon class="hand-cursor white-icon" matTooltip="{{'addNew' | translate}}"
                                                          (click)="openAllAddDialog(ehmUtils.medicineDialog)"> add
                                                </mat-icon>-->
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 40%">
                                                <div style="display: flow-root">
                                                    <mat-select-search-small
                                                        [isSearch]="true"
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        [formGroup]="row"
                                                        [controlName]="'medicineMaster'"
                                                        [data]="globalMedicineList"
                                                        [commonLookupId]="ehmUtils.medicineDialog"

                                                        (selectionChange)="checkMedicineMaster(row)"
                                                        [searchType]="ehmUtils.medicineDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--stock-->
                                        <ng-container matColumnDef="stock">
                                            <th *matHeaderCellDef>{{'stock' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 5%">
                                                <div style="display: flow-root;">
                                                    <span>{{ row.value.medicineMaster ? this.ehmUtils.getFullMedicineStock(row.value.medicineMaster, this.menuType) : ''}}</span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--dose-->
                                        <ng-container matColumnDef="dose">
                                            <th *matHeaderCellDef>
                                                {{'dose' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 15%">
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="calculateQty(row)"
                                                        [commonLookupId]="doseId"
                                                        [controlName]="'dose'"
                                                        [data]="doseDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.doseDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--duration-->
                                        <ng-container matColumnDef="duration">
                                            <th *matHeaderCellDef>{{'duration' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 15%">
                                                <div style="display: flow-root;">
                                                    <mat-form-field-1 style="width: 100% ;">
                                                        <input (blur)="calculateQty(row)" [readonly]="row.value.continueIs" class="input" formControlName="duration"
                                                               matInput min="0"
                                                               oninput="validity.valid||(value='.');" type="number">
                                                    </mat-form-field-1>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--dwmy-->
                                        <ng-container matColumnDef="dwmy">
                                            <th *matHeaderCellDef>
                                                {{'dwmy' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 15%">
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (selectionChange)="calculateQty(row)"
                                                        [controlName]="'dwmy'"
                                                        [data]="dwmyDropdownList"
                                                        [formGroup]="row">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--qty-->
                                        <ng-container matColumnDef="qty">
                                            <th *matHeaderCellDef>{{'qty' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 10%">
                                                <div style="display: flow-root">
                                                    <mat-form-field-1 style="width: 100% ;">
                                                        <input class="input" formControlName="qty" matInput min="0"
                                                               oninput="validity.valid||(value='.');" type="number">
                                                    </mat-form-field-1>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--instruction-->
                                        <ng-container matColumnDef="instruction">
                                            <th *matHeaderCellDef>
                                                {{'instruction' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                                style="width: 20%">
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        [commonLookupId]="instructionId"
                                                        [controlName]="'instruction'"
                                                        [data]="instructionDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.instructionDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!--continueIs-->
                                        <ng-container matColumnDef="continueIs">
                                            <th *matHeaderCellDef>{{'continueIs' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" class="text-alignment"
                                                mat-cell>
                                                <div>
                                                    <mat-checkbox formControlName="continueIs">
                                                    </mat-checkbox>
                                                </div>
                                            </td>
                                        </ng-container>


                                        <!--action-->
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef>{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="medicineAddRow(null, null, true)" *ngIf="medicineRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}">
                                                        add
                                                    </mat-icon>

                                                    <mat-icon (click)="medicineDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>

                            </div>
                            <!--// middle right left 1-->

                            <!--<div fxFlex="30%" fxFlex.md="100%" fxFlex.sm="100%"
                                 fxFlex.xs="100%">

                                <form [formGroup]="onExaminationFrmGroupDetails">
                                    <table [dataSource]="onExaminationDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope"
                                           mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="onExaminationDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: onExaminationDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        &lt;!&ndash;on examination&ndash;&gt;
                                        <ng-container matColumnDef="onExamination">
                                            <th *matHeaderCellDef="let row; let index = index">
                                                {{'onExamination2' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>

                                                <mat-form-field-1 class="flex-auto gt-xs:pr-3"
                                                                  style="width: 90%; margin-top: 5px;">
                                                    <input [matAutocomplete]="auto" class="border"
                                                           formControlName="onExamination" matInput type="text">
                                                    <mat-autocomplete #auto="matAutocomplete">
                                                        <mat-option *ngFor="let item of onExaminationDropdownList | customNameFilter: row.value.onExamination"
                                                                    [value]="item.name"
                                                                    name="storage_condition">{{ item.name }}</mat-option>
                                                    </mat-autocomplete>
                                                    <button  aria-hidden="true" class="close" ngxMatSelectSearchClear mat-icon-button *ngIf="(onExaminationDropdownList | customNameFilter: row.value.onExamination).length < 1"
                                                             (click)="addItem(this.onExamId, row.value.onExamination)">
                                                        <mat-icon>add</mat-icon>
                                                    </button>
                                                </mat-form-field-1>

                                            </td>
                                        </ng-container>


                                        &lt;!&ndash;action&ndash;&gt;
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="onExaminationAddRow()"
                                                              *ngIf="onExaminationRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="onExamDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>

                            </div>-->

                            <!-- oldInvestigation -->
                            <!--<div fxFlex="35%" fxFlex.md="100%" fxFlex.sm="100%"
                                 fxFlex.xs="100%">

                                <form [formGroup]="investigationFindFrmGroupDetails">
                                    <table [dataSource]="investigationFindDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope"
                                           mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="investigationFindDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: investigationFindDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        &lt;!&ndash;investigation&ndash;&gt;
                                        <ng-container matColumnDef="investigation">
                                            <th *matHeaderCellDef="let row; let index = index">
                                                {{'oldInvestigation' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div>
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        [commonLookupId]="investigationId"
                                                        [controlName]="'investigation'"
                                                        [data]="investigationDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.investigationDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        &lt;!&ndash;finding&ndash;&gt;
                                        <ng-container matColumnDef="finding">
                                            <th *matHeaderCellDef
                                                style="width: 30% !important;">{{'finding' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="finding" matInput type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>

                                        &lt;!&ndash;action&ndash;&gt;
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="investigationFindAddRow()"
                                                              *ngIf="investigationFindRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="investigationFindDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>

                            </div>-->
                            <!--// oldInvestigation-->


                        </div>
                        <!-- // middle right 1-->

                        <!--middle right 2-->
                        <div class="row mt-2">

                            <!-- investigation -->
                            <!--<div fxFlex="35%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                                <form [formGroup]="investigationFrmGroupDetails">
                                    <table [dataSource]="investigationDataSourceDetails" class="mat-elevation-z8"
                                           formArrayName="scope" mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="investigationDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: investigationDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        &lt;!&ndash;investigation&ndash;&gt;
                                        <ng-container matColumnDef="investigation">
                                            <th *matHeaderCellDef>
                                                {{'investigation' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkInvestigation(row)"
                                                        [commonLookupId]="investigationId"
                                                        [controlName]="'investigation'"
                                                        [data]="investigationDropdownList"
                                                        [formGroup]="row"
                                                        [searchType]="ehmUtils.investigationDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>


                                        &lt;!&ndash;action&ndash;&gt;
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="investigationAddRow()"
                                                              *ngIf="investigationRows.length === index+1" class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="investigationDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>
                                    </table>
                                </form>
                            </div>-->
                            <!--// investigation-->

                            <!--past illness-->
                            <!--<div fxFlex="35%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                                <form [formGroup]="pastIllFrmGroupDetails">
                                    <table [dataSource]="pastIllDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                           mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="pastIllDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: pastIllDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        &lt;!&ndash;pastIll&ndash;&gt;
                                        <ng-container matColumnDef="illnessName">
                                            <th *matHeaderCellDef style="width: 60% !important;">
                                                {{'illnessName' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkPastIll(row)"
                                                        [commonLookupId]="diseaseId"
                                                        [controlName]="'illnessName'"
                                                        [data]="diseaseDropdownList"
                                                        [formGroup]="row"
                                                        [isDental]="isDental"
                                                        [searchType]="ehmUtils.illnessDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        &lt;!&ndash;finding&ndash;&gt;
                                        <ng-container matColumnDef="disposal">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'disposal' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="disposal" matInput
                                                           type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>


                                        &lt;!&ndash;action&ndash;&gt;
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="pastIllAddRow()" *ngIf="pastIllRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="pastIllDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>

                                    </table>
                                </form>

                            </div>-->
                            <!-- // past illness-->

                            <!-- middle right left 2-->
                            <!--<div fxFlex="30%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                                <form [formGroup]="diseaseFrmGroupDetails">
                                    <table [dataSource]="diseaseDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                           mat-table>
                                        &lt;!&ndash; Row definitions &ndash;&gt;
                                        <tr *matHeaderRowDef="diseaseDisplayColumnsDetails" class="table-row smallFont"
                                            mat-header-row></tr>
                                        <tr *matRowDef="let row; let i = index; columns: diseaseDisplayColumnsDetails;"
                                            class="table-row smallFont"
                                            mat-row></tr>

                                        &lt;!&ndash;disease&ndash;&gt;
                                        <ng-container matColumnDef="disease">
                                            <th *matHeaderCellDef>
                                                {{'disease' | translate}}
                                            </th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div style="display: flow-root;">
                                                    <mat-select-search-small
                                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                                        (selectionChange)="checkDisease(row)"
                                                        [commonLookupId]="diseaseId"
                                                        [controlName]="'disease'"
                                                        [data]="diseaseDropdownList"
                                                        [formGroup]="row"
                                                        [isDental]="isDental"
                                                        [searchType]="ehmUtils.diseaseDialog">
                                                    </mat-select-search-small>
                                                </div>
                                            </td>
                                        </ng-container>

                                        &lt;!&ndash;onExamination &ndash;&gt;
                                        <ng-container matColumnDef="onExamination">
                                            <th *matHeaderCellDef
                                                style="width: 10% !important;">{{'onExamination' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <mat-form-field-1>
                                                    <input class="input" formControlName="onExamination" matInput
                                                           type="text">
                                                </mat-form-field-1>
                                            </td>
                                        </ng-container>

                                        &lt;!&ndash;action&ndash;&gt;
                                        <ng-container matColumnDef="action">
                                            <th *matHeaderCellDef
                                                style="width: 20% !important;">{{'action' | translate}}</th>
                                            <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                                mat-cell>
                                                <div class="buttons text-alignment">
                                                    <mat-icon (click)="diseaseAddRow()" *ngIf="diseaseRows.length === index+1"
                                                              class="hand-cursor"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>

                                                    <mat-icon (click)="diseaseDeleteRow(index)" class="hand-cursor"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">delete
                                                    </mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>
                                    </table>
                                </form>
                            </div>-->
                            <!--// middle right left 2-->

                        </div>

                    </div>


                    <!-- // middle right-->

                </div>
                <!-- // middle part-->

                <br/>
                <!--last part-->
                <div class="row" class="flex flex-col bg-card shadow rounded overflow-hidden p-2">

                    <!-- row 1 -->
                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">

                        <!--advice-->
                        <!--<div fxFlex="49%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <form [formGroup]="adviceFrmGroupDetails">
                                <table [dataSource]="adviceDataSourceDetails" class="mat-elevation-z8"
                                       formArrayName="scope" mat-table>
                                    &lt;!&ndash; Row definitions &ndash;&gt;
                                    <tr *matHeaderRowDef="adviceDisplayColumnsDetails" class="table-row smallFont"
                                        mat-header-row></tr>
                                    <tr *matRowDef="let row; let i = index; columns: adviceDisplayColumnsDetails;"
                                        class="table-row smallFont"
                                        mat-row></tr>

                                    &lt;!&ndash;advice&ndash;&gt;
                                    <ng-container matColumnDef="advice">
                                        <th *matHeaderCellDef>
                                            {{'advice' | translate}}
                                        </th>
                                        <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                            mat-cell>
                                            <div style="display: flow-root;">
                                                <mat-select-search-small
                                                    (callBackForAddData)="setCommonLookupAddValue($event)"
                                                    (selectionChange)="checkAdvice(row)"
                                                    [commonLookupId]="adviceId"
                                                    [controlName]="'advice'"
                                                    [data]="adviceDropdownList"
                                                    [formGroup]="row"
                                                    [isDental]="isDental"
                                                    [searchType]="ehmUtils.adviceDialog">
                                                </mat-select-search-small>
                                            </div>
                                        </td>
                                    </ng-container>


                                    &lt;!&ndash;action&ndash;&gt;
                                    <ng-container matColumnDef="action">
                                        <th *matHeaderCellDef>{{'action' | translate}}</th>
                                        <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                            mat-cell>
                                            <div class="buttons">
                                                <button class="toggle-sidebar-folded" fxHide.lt-lg mat-icon-button>
                                                    <mat-icon (click)="adviceAddRow()"
                                                              *ngIf="adviceRows.length === index+1"
                                                              color="primary" matTooltip="{{'addNew' | translate}}"> add
                                                    </mat-icon>
                                                </button>

                                                <button class="toggle-sidebar-folded" fxHide.lt-lg mat-icon-button>
                                                    <mat-icon (click)="adviceDeleteRow(index)"
                                                              color="warn" matTooltip=" {{'delete' | translate}}">
                                                        delete
                                                    </mat-icon>
                                                </button>

                                            </div>
                                        </td>
                                    </ng-container>

                                </table>
                            </form>
                        </div>-->
                        <!-- // advice-->


                        <div fxFlex="49%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <div class="flex-auto gt-xs:pr-3">
                                    <mat-label>{{'referredDoctor' | translate}}</mat-label>
                                    <mat-select-search-small
                                        (callBackForAddData)="setCommonLookupAddValue($event)"
                                        [commonLookupId]="refDocId"
                                        [controlName]="'referredDoctor'"
                                        [data]="refDocDropdownList"
                                        [formGroup]="frmGroup"
                                        [isDental]="isDental"
                                        [searchType]="ehmUtils.refDocDialog">
                                    </mat-select-search-small>
                                </div>
                            </div>
                        </div>

                    </div>
                    <br/>
                    <!-- // row 1-->

                    <!-- middle right left 1-->
                    <div fxFlex="35%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                        <form [formGroup]="disposalFrmGroupDetails">
                            <table [dataSource]="disposalDataSourceDetails" class="mat-elevation-z8" formArrayName="scope"
                                   mat-table>
                                <!-- Row definitions -->
                                <tr *matHeaderRowDef="disposalDisplayColumnsDetails" class="table-row smallFont"
                                    mat-header-row></tr>
                                <tr *matRowDef="let row; let i = index; columns: disposalDisplayColumnsDetails;"
                                    class="table-row smallFont"
                                    mat-row></tr>

                                <!--problemType-->
                                <ng-container matColumnDef="disposalId">
                                    <th *matHeaderCellDef>
                                        {{'disposal' | translate}}
                                        <!--<mat-icon class="hand-cursor white-icon" matTooltip="{{'addNew' | translate}}"
                                                  (click)="openAllAddDialog(ehmUtils.ccDialog)"> add
                                        </mat-icon>-->
                                    </th>
                                    <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                        mat-cell>
                                        <div style="display: flow-root;">
                                            <mat-select-search-small
                                                #ccValue
                                                (callBackForAddData)="setCommonLookupAddValue($event)"
                                                (selectionChange)="checkDisposal(row)"
                                                [commonLookupId]="dosposalId"
                                                [controlName]="'disposal'"
                                                [data]="disposalDropdownList"
                                                [formGroup]="row"
                                                [isDental]="isDental"
                                                [searchType]="ehmUtils.disposalDialog">
                                            </mat-select-search-small>
                                        </div>
                                    </td>
                                </ng-container>

                                <!--duration-->
                                <ng-container matColumnDef="duration">
                                    <th *matHeaderCellDef>{{'duration' | translate}}</th>
                                    <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                        style="width: 15%">
                                        <div style="display: flow-root;">
                                            <mat-form-field-1 style="width: 100% ;">
                                                <input (blur)="onBlurDisposalDuration(row)" class="input" formControlName="disposalDuration" matInput
                                                       min="0"
                                                       oninput="validity.valid||(value='.');" type="number">
                                            </mat-form-field-1>
                                        </div>
                                    </td>
                                </ng-container>

                                <!--dwmy-->
                                <ng-container matColumnDef="dwmy">
                                    <th *matHeaderCellDef>
                                        {{'dwmy' | translate}}
                                    </th>
                                    <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell
                                        style="width: 15%">
                                        <div style="display: flow-root;">
                                            <mat-select-search-small
                                                (selectionChange)="onBlurDisposalDuration(row)"
                                                [controlName]="'dwmy'"
                                                [data]="dwmyDropdownList"
                                                [formGroup]="row">
                                            </mat-select-search-small>
                                        </div>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="disposalDate">
                                    <th *matHeaderCellDef>
                                        {{'disposalDate' | translate}}
                                    </th>
                                    <td *matCellDef="let row; let index = index" [formGroupName]="index"
                                        mat-cell>
                                        <div style="display: flow-root;">
                                            <input #dateValue2 (blur)="appUtils.formatDate(frmGroup, 'disposalDate', dateValue2)"
                                                   [matDatepicker]="picker2"
                                                   [placeholder]="validationMsg.DATE_FORMAT"
                                                   class="inputField" formControlName="disposalDate" matInput
                                                   readonly>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </div>
                                    </td>
                                </ng-container>


                                <!--action-->
                                <ng-container matColumnDef="action">
                                    <th *matHeaderCellDef style="width: 20% !important;">{{'action' | translate}}</th>
                                    <td *matCellDef="let row; let index = index" [formGroupName]="index" mat-cell>
                                        <div class="buttons text-alignment">
                                            <mat-icon (click)="disposalAddRow()" *ngIf="disposalRows.length === index+1"
                                                      class="hand-cursor"
                                                      color="primary" matTooltip="{{'addNew' | translate}}"> add
                                            </mat-icon>

                                            <mat-icon (click)="disposalDeleteRow(index)" class="hand-cursor"
                                                      color="warn" matTooltip=" {{'delete' | translate}}">delete
                                            </mat-icon>
                                        </div>
                                    </td>
                                </ng-container>

                            </table>
                        </form>
                    </div>
                    <!-- row 2 -->
                    <div class="mt-2" fxLayout="row wrap" fxLayoutAlign="space-between center">

                        <div fxFlex="25%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-form-field-1 class="flex-auto gt-xs:pr-3">
                                    <mat-label>{{'followUpVisitDuration' | translate}}</mat-label>
                                    <input class="inputField" formControlName="followUpVisitDuration" matInput min="0"
                                           oninput="validity.valid||(value='.');" type="number">
                                </mat-form-field-1>
                            </div>
                        </div>

                        <div *ngIf="false" fxFlex="25%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-form-field-1 class="flex-auto gt-xs:pr-3">
                                    <mat-label>{{'followUpVisitDate' | translate}}</mat-label>
                                    <input #dateValue2 (blur)="appUtils.formatDate(frmGroup, 'followUpVisitDate', dateValue2)"
                                           [matDatepicker]="picker2"
                                           [placeholder]="validationMsg.DATE_FORMAT"
                                           class="inputField" formControlName="followUpVisitDate" matInput
                                           readonly>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field-1>
                            </div>
                        </div>

                        <div fxFlex="75%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                    <mat-label>
                                        <span>{{'followUpComment' | translate}}</span>
                                    </mat-label>
                                    <!--<input class="inputField" formControlName="followUpComment" matInput>-->

                                    <mat-form-field-1 class="flex-auto gt-xs:pr-3"
                                                      style="width: 70%; margin-top: 5px;">
                                        <input [matAutocomplete]="auto" class="border"
                                               formControlName="followUpComment" matInput type="text">
                                        <mat-autocomplete #auto="matAutocomplete">
                                            <mat-option *ngFor="let item of followupCommentDropdownList | customNameFilter: frmGroup.value.followUpComment"
                                                        [value]="item.name"
                                                        name="storage_condition">{{ item.name }}</mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field-1>
                                    <button  aria-hidden="true" class="close" ngxMatSelectSearchClear mat-icon-button *ngIf="(followupCommentDropdownList | customNameFilter: frmGroup.value.followUpComment).length < 1"
                                             (click)="addItem(this.folloupComId, frmGroup.value.followUpComment)">
                                        <mat-icon>add</mat-icon>
                                    </button>
                            </div>
                        </div>

                    </div>
                    <!-- // row 2 -->


                    <!--button section-->
                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">

                        <!--left side-->
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <!-- button -->
                            <div class="flex justify-end mt-3">

                                <mat-form-field class="fuse-mat-dense flex-auto mr-2" fxFlex="60%" fxFlex.md="60%"
                                                fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input formControlName="templateName" matInput placeholder="Template Name">
                                </mat-form-field>


                                <button
                                    (click)="onSubmit(true)"
                                    *ngIf="!editValue"
                                    [disabled]="!frmGroup.value.templateName || !medicineFrmGroupDetails.valid || searchLoader"
                                    class="px-8"
                                    color="primary"
                                    mat-flat-button
                                    type="button">
                                    {{'saveTemplate' | translate}}
                                    <mat-progress-spinner
                                        *ngIf="searchLoader"
                                        [diameter]="24"
                                        [mode]="'indeterminate'">
                                    </mat-progress-spinner>
                                </button>

                            </div>
                            <!-- // button -->
                        </div>
                        <!-- // left side-->

                        <!--right side-->
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <!-- button -->
                            <div class="flex justify-end mt-3 mr-2">

                                <button
                                    (click)="resetFromData()"
                                    class="px-8 mr-2"
                                    color="accent"
                                    mat-flat-button
                                    type="button">
                                    <mat-icon class="mr-1">refresh</mat-icon>
                                    <span *ngIf="!editValue">{{'reset' | translate}}</span>
                                    <span *ngIf="editValue">{{'cancel' | translate}}</span></button>

                                <button
                                    (click)="onSubmit()"
                                    *ngIf="!editValue"
                                    [disabled]="!frmGroup.valid || !medicineFrmGroupDetails.valid || searchLoader"
                                    class="px-8"
                                    color="primary"
                                    mat-flat-button
                                    type="button">
                                    <mat-icon class="mr-1">save</mat-icon>
                                    {{'save' | translate}}
                                    <mat-progress-spinner
                                        *ngIf="searchLoader"
                                        [diameter]="24"
                                        [mode]="'indeterminate'">
                                    </mat-progress-spinner>
                                </button>

                                <button
                                    (click)="update()"
                                    *ngIf="editValue"
                                    [disabled]="!frmGroup.valid || !medicineFrmGroupDetails.valid || searchLoader"
                                    class="px-8"
                                    color="primary"
                                    mat-flat-button
                                    type="button">
                                    <mat-icon class="mr-1">save</mat-icon>
                                    {{'update' | translate}}
                                    <mat-progress-spinner
                                        *ngIf="searchLoader"
                                        [diameter]="24"
                                        [mode]="'indeterminate'">
                                    </mat-progress-spinner>
                                </button>

                            </div>
                            <!-- // button -->
                        </div>
                        <!-- // button section-->

                    </div>
                    <!-- // last part-->

                </div>
                <!--last part-->

            </form>

            <!-- // form div -->
        </mat-card>
        <!-- body Card -->
    </div>
</div>
